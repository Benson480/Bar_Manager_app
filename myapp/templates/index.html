<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BarManager</title>
  <link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhEYp1Ms55GKpRiyGycyExeolQXvYImlI7vg&usqp=CAU" type="image/x-icon">
  <!-- css -->
  <!--bootstrap-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <!--font awesome-->
  <script src="https://kit.fontawesome.com/175df408b4.js" crossorigin="anonymous"></script>

  <!-- google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital@1&family=Josefin+Sans:ital,wght@0,400;1,400;1,500&display=swap" rel="stylesheet">

  <style>

    .image-section {
      background-image: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTisOmuXlpkSScXHatNqfAJmXwUcd96Jjrv6dYdDo97&s");
      background-size: cover;
    }

    .main-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .container-fluid {
      padding: 0;
      overflow: hidden;
      margin: 0 auto;
      max-width: 100%;
    }

    .logo-img {
      width: 80px;
      height: auto;
      padding-top: 10px;
      padding-left: 0px;
      float: left;
    }

    .navbar {
      background-color: transparent;
      margin: 0;
      padding: 0;
      list-style-type: none;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 999;
    }

    .navbar-brand {
      color: #244c0c;
      font-family: 'Josefin Sans', sans-serif;
      font-weight: bold;
      position: absolute;
      left: 200px;
      padding-top: 30px;
    }

    .nav-item {
      float: right;
      display: block;
      text-align: center;
      padding: 12px 10px;
      text-decoration: none;
      overflow: hidden;
      text-align: center;
      padding: 12px 10px;
      text-decoration: none;
      background-color: #ffffff; /* Optional: Set a background color if needed */
      z-index: 100; /* Optional: Set a higher z-index if needed */
    }

    .nav-link {
      color: hsl(97, 64%, 13%);
      font-size: 1.2rem;
      font-family: 'Josefin Sans', sans-serif;
      
    }

    @media (max-width: 767px) {
      .navbar-brand {
        left: 20px;
      }

      .navbar-collapse {
        position: absolute;
        top: 60px;
        left: 0;
        right: 0;
        background-color: white;
      }

      .navbar-nav {
        width: 100%;
        text-align: center;
      }

      .nav-item {
        float: none;
        display: inline-block;
      }

      .navbar-toggler {
        position: absolute;
        top: 15px;
        right: 20px;
      }
    }

  #chatbot-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 250px;
  height: 300px;
  border-radius: 8px;
  overflow: hidden;
}

#chatbot-frame {
  width: 100%;
  height: 100%;
}

#chatbot-toggle {
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 10px 20px;
  font-size: 16px;
  border-radius: 4px;
  background-color: #244c0c;
  color: #ffffff;
  border: none;
}

#chatbot-toggle:hover {
  cursor: pointer;
  background-color: #A4BE7B;
}

.message {
      margin: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .user {
      background-color: #f1f1f1;
    }

    .assistant {
      background-color: #e5e5ff;
    }
    ul {
      list-style: none;
      padding: 0;
    }

    li {
      display: inline-block;
      margin: 10px;
      width: calc(25% - 20px); /* Set the width for four items per row (25% - 20px margin) */
      box-sizing: border-box; /* Include padding and border within the width calculation */
    }

    img {
      max-width: 100px; /* Set the maximum width of the images */
      max-height: 100px; /* Set the maximum height of the images */
      border: 1px solid #ccc;
    }

    /* Add a container to limit the page width */
    .container {
      max-width: 800px; /* Set the maximum width for the container */
      margin: 0 auto; /* Center the container on the page */
      padding: 20px; /* Optional: Add some padding around the content */
      background-color: rgba(255, 255, 255, 0.9); /* Light background color */
      border-radius: 10px; /* Rounded corners */
    }

    /* Responsive styles */
    @media (max-width: 600px) {
      .container {
        max-width: 100%; /* Set the container width to 100% on small screens */
        padding: 10px; /* Adjust the padding on small screens */
      }

      li {
        width: 100%; /* Set the width to 100% on small screens for a vertical layout */
      }
    }
    
    .nav-link:hover {
    transform: translateX(10px); /* Adjust the value as needed */
    background-color: #e5e5ff;
    }
    /* Add background texture */

    /* Define the container for the link */
  /* .nav-item {
    overflow: hidden;
    white-space: nowrap;
  }

  /* Define the link style */
  /* .nav-link {
    color: #244c0c;
    display: inline-block;
    animation: scrollText 5s linear infinite;
  }

  /* Define the animation keyframes */
  /* @keyframes scrollText {
    0% {
      transform: translateX(100%);
    }
    100% {
      transform: translateX(-100%);
    }
  }  */

</style>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <!-- Include jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

  <!-- Include Bootstrap JS -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>
  <section class="image-section" id="title" >
    <div class="container-fluid" style="background-color: rgb(230, 159, 182);">
      <!-- navbar -->
      <nav class="navbar navbar-expand-lg bg-transparent fixed-navbar">
        <div class="container">
          <img class="logo-img" src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhEYp1Ms55GKpRiyGycyExeolQXvYImlI7vg&usqp=CAU' alt="logo-img" />
          <a class="navbar-brand" href="#">BarManager</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            Menu
          </button>
          <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/index" style="color: #244c0c;">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="/about" style="color: #244c0c;">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/anouncement" style="color: #244c0c;">Announcements</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/contacts" style="color: #244c0c;">Contact</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/login" style="color: #244c0c;">Sign In</a>
              </li>
              <!-- <li class="nav-item">
                <a class="nav-link" href="/accounts/register" style="color: #244c0c;">Sign up</a>
              </li> -->
              <li class="nav-item">
                <a class="nav-link" href="/{{ BASE_URL }}admin/"  target="_blank" style="color: #244c0c;">Admin</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </section>
  <section class="image-section" id="title">
    <style>
      .product {
        background-color: #fff;
        border: 1px solid #e0e0e0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin: 10px;
        padding: 20px;
        width: calc(33.33% - 20px); /* 3 columns per row with some margin */
        text-align: center;
        transition: transform 0.2s ease-in-out;
      }
  
      .product:hover {
        transform: translateY(-5px);
      }
  
      .product img {
        max-width: 100%;
        height: auto;
        max-height: 150px; /* Limit the height of the images */
      }
  
      .product p {
        margin: 10px 0;
        width: 100%;
      }
  
      .product button {
        background-color: #e7ebf0;
        color: #1d0707;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        transition: background-color 0.2s ease-in-out;
      }
  
      .product button:hover {
        background-color: #6ea8e2;
      }
  
      .no-images {
        text-align: center;
        font-size: 18px;
        margin-top: 20px;
      }
  
      /* CSS for controlling the number of columns */
      .row {
        display: flex;
        flex-wrap: wrap;
        margin: -10px; /* Compensate for the margin on .product */
      }
  
      .col-md-4 {
        flex: 0 0 calc(33.33% - 20px); /* 3 columns per row with some margin */
        margin: 10px;
      }
    </style>
  
    <div class="container">
      {% if images %}
        <div class="row">
          {% for image in images %}
            <div class="col-md-4 product">
              <p><strong>Title: {{ image.title }}</strong></p>
              <a href="{{ image.image.url }}" target="_blank">
                <img src="{{ image.image.url }}" alt="Uploaded Image">
              </a>
              {% if image.about_Image %}
                <p>{{ image.about_Image|wordwrap:40 }}</p>
              {% endif %}
              <p><strong>Uploaded At:</strong> {{ image.uploaded_at }}</p>
              <p><strong>Status:</strong> {{ image.uploaded_at }}</p>
  
              <!-- Buttons -->
              <form method="POST" action="/add_to_cart/{{ image.id }}">
                {% csrf_token %}
                <button type="submit">Add to Cart</button>
              </form>
  
              <form method="POST" action="/purchase_item/{{ image.id }}">
                {% csrf_token %}
                <button type="submit">Purchase Item</button>
              </form>
  
              <form method="POST" action="/make_order/{{ image.id }}">
                {% csrf_token %}
                <button type="submit">Make an Order</button>
              </form>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="no-images">No images uploaded yet.</p>
      {% endif %}
    </div>
  </section>
  
  
      
      

  
  <!-- js -->
  <!-- bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-z3gFVY5Ed5R9I8+fYjv8Xg7YiMw5+ZpOZBpFJtTBhI932AdHTZHKiQgV4jMMwwgh" crossorigin="anonymous"></script>

  <div id="chatbot-container">
    <div id="chatbot-frame" style="display: none;">
      <div id="chatbot-messages"></div>
      <input type="text" id="chatbot-input" placeholder="Type your message..." />
      <button id="chatbot-send" onclick="sendMessage()">Send</button>
    </div>
    <button id="chatbot-toggle" onclick="toggleChatbot()">Chat</button>
  </div>
  
  <!-- Add the following JavaScript code below the HTML content -->
  <script>
    // Get the necessary DOM elements
    const chatbotFrame = document.getElementById("chatbot-frame");
    const chatbotToggle = document.getElementById("chatbot-toggle");
    const chatbotMessages = document.getElementById("chatbot-messages");
    const inputElement = document.getElementById("chatbot-input");
  
    function toggleChatbot() {
      if (chatbotFrame.style.display === "none") {
        chatbotFrame.style.display = "block";
        chatbotToggle.innerHTML = "Close Chat";
      } else {
        chatbotFrame.style.display = "none";
        chatbotToggle.innerHTML = "Chat";
      }
    }
  
    function appendMessage(sender, message) {
      const messageElement = document.createElement("div");
      messageElement.classList.add("message", sender === "user" ? "user" : "assistant");
      messageElement.innerText = message;
      chatbotMessages.appendChild(messageElement);
    }
  
    async function sendMessage() {
      const message = inputElement.value;
  
      // Append user message to the chatbot messages
      appendMessage("user", message);
      inputElement.value = "";
  
      // Send user message to ChatGPT API
      try {
        const response = await fetch('https://api.openai.com/v1/engines/davinci-codex/completions', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer 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',
          },
          body: JSON.stringify({
            model: 'gpt-3.5-turbo',
            messages: [{ role: 'system', content: 'You are a helpful assistant.' }, { role: 'user', content: message }],
          }),
        });
  
        if (!response.ok) {
          throw new Error('Failed to receive response from the chatbot.');
        }
  
        const data = await response.json();
        const assistantReply = data.choices[0].message.content;
        // Append assistant reply to the chatbot messages
        appendMessage("assistant", assistantReply);
      } catch (error) {
        console.error('Error:', error);
        // In case of error, show a fallback message to the user
        appendMessage("assistant", "Sorry, something went wrong while processing your request.");
      }
    }
  </script>
  

</body>

</html>
