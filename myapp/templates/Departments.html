{% extends "master.html" %}

{% block title %}
  Departments
{% endblock %}

{% block content %}
<header style="background-image: url('https://img.freepik.com/premium-photo/fintech-icon-abstract-financial-technology-background_34663-91.jpg?w=2000'); background-size: cover; padding: 5px 0; display: grid; grid-template-columns: auto 1fr; gap: 20px; justify-items: center; align-items: center;">
  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQhEYp1Ms55GKpRiyGycyExeolQXvYImlI7vg&usqp=CAU" alt="Logo" style="width: 80px; height: 80px; padding: 5px;">
  <div>
    <h2 style="color: #fff; font-size: 36px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); margin: 0;">Organization Deparments</h2>
    <p style="color: #fff; font-size: 18px; opacity: 0.8; margin-top: 10px;">List Of our Departments</p>
  </div>
</header>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

  <div class="container mt-4">
    <div class="row">
      <div class="col-md-10 offset-md-1" style="text-align: center; background-image: url('https://t3.ftcdn.net/jpg/03/98/72/60/360_F_398726020_osA2T853Y6ZDfRUOqfNCo6yhZ8MUQew4.jpg');">
        <h1 class="text-center mb-4" style="background-color: white;">List of Departments <i class="fas fa-building"></i></h1>
        <div class="input-group mb-3">
          <input type="text" id="search" class="form-control" placeholder="Search by department name">
          <div class="input-group-append">
            <button class="btn btn-primary" id="search-button" type="button"><i class="fas fa-search"></i> Search</button>
          </div>
        </div>
        <ul class="list-group" id="department-list" style="background-color: rgb(255, 255, 255);">
          {% for department in departments %}
            <a class="list-group-item department-item">
              <div class="row">
                <div class="col-md-8">
                  <h3 class="mb-2">{{ department.name }} <i class="fas fa-building"></i></h3>
                  <p class="mb-2">{{ department.description }}</p>
                </div>
                <div class="col-md-4 text-center">
                  <button class="btn btn-primary btn-view-details" data-department="{{ department.name }}"><i class="fas fa-info-circle"></i> View Details</button>
                </div>
              </div>
            </a>
          {% empty %}
            <li class="list-group-item empty-department text-center"><i class="fas fa-exclamation-circle"></i> No departments available.</li>
          {% endfor %}
        </ul>
        <nav aria-label="Page navigation" class="mt-4">
          <ul class="pagination justify-content-center">
            <li class="page-item">
              <a class="page-link" href="?page=1" aria-label="First">
                <span aria-hidden="true"><i class="fas fa-angle-double-left"></i></span>
              </a>
            </li>
            {% for page_num in departments.paginator.page_range %}
              <li class="page-item{% if departments.number == page_num %} active{% endif %}">
                <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
              </li>
            {% endfor %}
            <li class="page-item">
              <a class="page-link" href="?page={{ departments.paginator.num_pages }}" aria-label="Last">
                <span aria-hidden="true"><i class="fas fa-angle-double-right"></i></span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>

  <script>
    // Add interactivity (optional)
    document.addEventListener("DOMContentLoaded", function () {
      const departmentItems = document.querySelectorAll(".department-item");
      const viewDetailsButtons = document.querySelectorAll(".btn-view-details");
      const searchInput = document.getElementById("search");
      const searchButton = document.getElementById("search-button");

      departmentItems.forEach((item) => {
        item.addEventListener("click", () => {
          // Handle item click (e.g., navigate to department details page)
          alert(`Clicked on department: ${item.querySelector(".department-title").textContent}`);
        });
      });

      viewDetailsButtons.forEach((button) => {
        button.addEventListener("click", (event) => {
          const departmentName = event.currentTarget.getAttribute("data-department");
          alert(`View details for department: ${departmentName}`);
        });
      });

      // Filter departments by name when search button is clicked
      searchButton.addEventListener("click", () => {
        const searchValue = searchInput.value.toLowerCase();
        departmentItems.forEach((item) => {
          const departmentName = item.querySelector(".department-title").textContent.toLowerCase();
          if (departmentName.includes(searchValue)) {
            item.style.display = "list-item";
          } else {
            item.style.display = "none";
          }
        });
      });
    });
  </script>

  <style>
    /* Add custom styles (optional) */
    .departments-list {
      margin-top: 20px;
    }

    .department-item {
      cursor: pointer;
      transition: background-color 0.3s ease-in-out;
    }

    .department-item:hover {
      background-color: #f0f0f0;
    }

    .department-title {
      font-size: 24px;
    }

    .department-description {
      color: #777;
    }

    .empty-department {
      font-style: italic;
    }
  </style>
{% endblock %}
